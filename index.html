<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CATÁLOGO ONE | Tienda Online</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #111827;
      --primary-dark: #000000;
      --secondary: #2563eb;
      --accent: #22c55e;
      --accent-dark: #16a34a;
      --danger: #e74c3c;
      --success: #10b981;
      --warning: #f59e0b;
      --light: #f8f9fa;
      --dark: #1f2937;
      --gray: #6b7280;
      --border: #e5e7eb;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --radius: 12px;
      --radius-sm: 8px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      background-color: #f9fafb;
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header */
    .hero-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border-radius: var(--radius);
      margin: 20px 0 30px;
      padding: 30px;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-hover);
    }

    .hero-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent), var(--secondary));
    }

    .header-content {
      position: relative;
      z-index: 1;
      text-align: center;
    }

    .brand-title {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .brand-title h1 {
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: -0.5px;
    }

    .brand-logo {
      height: 70px;
      border-radius: var(--radius-sm);
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
    }

    .tagline {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 25px;
    }

    /* Controls */
    .controls-elegant {
      background: white;
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    .search-elegant {
      position: relative;
      margin-bottom: 20px;
    }

    .search-elegant input {
      width: 100%;
      padding: 14px 20px 14px 45px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 16px;
      transition: var(--transition);
    }

    .search-elegant input:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .search-elegant i {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
    }

    /* Filters */
    .filters-elegant {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }

    .filter-chip {
      padding: 10px 20px;
      background: var(--light);
      border: 2px solid var(--border);
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
    }

    .filter-chip:hover {
      background: #e3f2fd;
      border-color: var(--secondary);
    }

    .filter-chip.active {
      background: var(--secondary);
      color: white;
      border-color: var(--secondary);
    }

    /* Products Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 50px;
    }

    .product-card {
      background: white;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
      border: 1px solid var(--border);
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }

    .product-image-container {
      height: 200px;
      width: 100%;
      overflow: hidden;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
    }

    .product-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transition: transform 0.3s ease;
    }

    .product-card:hover .product-image {
      transform: scale(1.05);
    }

    .product-info {
      padding: 20px;
    }

    .product-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--primary);
      line-height: 1.4;
      height: 44px;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .product-sku {
      font-size: 0.8rem;
      color: var(--gray);
      margin-bottom: 10px;
    }

    .product-price {
      font-size: 1.4rem;
      font-weight: 800;
      color: var(--danger);
      margin-bottom: 15px;
    }

    .product-price::before {
      content: 'Gs. ';
      font-size: 0.9rem;
      opacity: 0.7;
    }

    .product-badges {
      position: absolute;
      top: 15px;
      right: 15px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .badge {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 700;
      color: white;
      text-transform: uppercase;
    }

    .badge-accent {
      background: var(--accent);
    }

    .badge-primary {
      background: var(--secondary);
    }

    .badge-warning {
      background: var(--warning);
    }

    .badge-danger {
      background: var(--danger);
    }

    /* Buttons */
    .btn-whatsapp {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #25d366, #128C7E);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 1rem;
    }

    .btn-whatsapp:hover {
      background: linear-gradient(135deg, #128C7E, #075E54);
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(37, 211, 102, 0.2);
    }

    .btn-view-details {
      width: 100%;
      padding: 12px;
      background: var(--light);
      color: var(--primary);
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .btn-view-details:hover {
      background: var(--secondary);
      color: white;
      border-color: var(--secondary);
    }

    /* ===== LANDING PAGE ===== */
    .landing-container {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .landing-container.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .back-to-catalog {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 25px;
      background: var(--secondary);
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      margin-bottom: 30px;
      text-decoration: none;
    }

    .back-to-catalog:hover {
      background: var(--primary);
      transform: translateX(-5px);
    }

    .landing-product {
      background: white;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-hover);
      margin-bottom: 40px;
    }

    .landing-header {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      padding: 40px;
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    }

    @media (max-width: 900px) {
      .landing-header {
        grid-template-columns: 1fr;
      }
    }

    .landing-image-wrapper {
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      background: white;
      padding: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--border);
    }

    .landing-image {
      max-width: 100%;
      max-height: 400px;
      object-fit: contain;
    }

    .landing-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .landing-title {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 15px;
      line-height: 1.2;
    }

    .landing-sku {
      color: var(--gray);
      margin-bottom: 20px;
      font-size: 1rem;
      background: var(--light);
      padding: 8px 15px;
      border-radius: var(--radius-sm);
      display: inline-block;
    }

    .landing-price-container {
      margin-bottom: 25px;
    }

    .landing-price {
      font-size: 3rem;
      font-weight: 900;
      color: var(--danger);
      margin-bottom: 5px;
    }

    .landing-price::before {
      content: 'Gs. ';
      font-size: 1.5rem;
      opacity: 0.7;
    }

    .landing-old-price {
      font-size: 1.5rem;
      color: var(--gray);
      text-decoration: line-through;
      margin-right: 10px;
    }

    /* Urgencia */
    .urgency-banner {
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      padding: 15px;
      border-radius: var(--radius-sm);
      margin-bottom: 25px;
      border-left: 4px solid var(--warning);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .urgency-banner i {
      color: var(--warning);
      font-size: 1.2rem;
    }

    /* Beneficios */
    .benefits-section {
      padding: 30px 40px;
      background: white;
      border-top: 1px solid var(--border);
    }

    .benefits-section h3 {
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .benefit-card {
      background: #f8fafc;
      padding: 20px;
      border-radius: var(--radius-sm);
      border: 2px solid var(--border);
      transition: var(--transition);
      display: flex;
      align-items: flex-start;
      gap: 15px;
    }

    .benefit-card:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }

    .benefit-icon {
      background: var(--accent);
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .benefit-content h4 {
      color: var(--primary);
      margin-bottom: 5px;
      font-size: 1.1rem;
    }

    /* Características */
    .features-section {
      padding: 30px 40px;
      background: #f8fafc;
    }

    .features-section h3 {
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .features-list {
      list-style: none;
    }

    .features-list li {
      padding: 10px 0;
      border-bottom: 1px dashed var(--border);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .features-list li:last-child {
      border-bottom: none;
    }

    .features-list i {
      color: var(--accent);
    }

    /* CTA Section */
    .cta-section {
      padding: 40px;
      text-align: center;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border-radius: 0 0 var(--radius) var(--radius);
    }

    .cta-section h3 {
      font-size: 2rem;
      margin-bottom: 15px;
    }

    .cta-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .btn-cta-whatsapp {
      padding: 18px 40px;
      background: linear-gradient(135deg, #25d366, #128C7E);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 800;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 1.2rem;
    }

    .btn-cta-whatsapp:hover {
      background: linear-gradient(135deg, #128C7E, #075E54);
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(37, 211, 102, 0.3);
    }

    .btn-cta-secondary {
      padding: 18px 40px;
      background: white;
      color: var(--primary);
      border: 2px solid white;
      border-radius: var(--radius-sm);
      font-weight: 800;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 1.2rem;
    }

    .btn-cta-secondary:hover {
      background: transparent;
      color: white;
    }

    /* ===== MODAL DE COMPRA ===== */
    .modal-elegant {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .modal-content {
      background: white;
      border-radius: var(--radius);
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 25px;
      border-radius: var(--radius) var(--radius) 0 0;
      position: relative;
    }

    .modal-header h2 {
      font-size: 1.5rem;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .close-modal {
      position: absolute;
      top: 25px;
      right: 25px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-modal:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .modal-body {
      padding: 30px;
    }

    .form-section {
      margin-bottom: 25px;
    }

    .form-section:last-child {
      margin-bottom: 0;
    }

    .form-section h3 {
      color: var(--primary);
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--border);
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--dark);
      font-size: 0.9rem;
    }

    .form-group label.required::after {
      content: " *";
      color: var(--danger);
    }

    .form-control {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 16px;
      transition: var(--transition);
      background: white;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .form-control.error {
      border-color: var(--danger);
      box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
    }

    /* Cantidad */
    .quantity-selector {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .qty-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid var(--accent);
      background: white;
      color: var(--accent);
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .qty-btn:hover {
      background: var(--accent);
      color: white;
    }

    .quantity-display {
      font-size: 1.3rem;
      font-weight: 700;
      min-width: 40px;
      text-align: center;
    }

    /* Tallas */
    .size-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .size-option {
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      background: white;
    }

    .size-option:hover {
      border-color: var(--accent);
    }

    .size-option.selected {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Resumen */
    .order-summary {
      background: #f8fafc;
      border-radius: var(--radius-sm);
      padding: 20px;
      border: 2px solid var(--border);
      margin-top: 25px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px dashed var(--border);
    }

    .summary-row:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .summary-row.total {
      font-size: 1.2rem;
      font-weight: 800;
      color: var(--primary);
      border-top: 2px solid var(--border);
      padding-top: 15px;
      margin-top: 10px;
    }

    .discount-badge {
      background: var(--success);
      color: white;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 8px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 0 15px;
      }
      
      .hero-header {
        padding: 20px;
        margin: 15px 0 20px;
      }
      
      .brand-title h1 {
        font-size: 2rem;
      }
      
      .brand-logo {
        height: 60px;
      }
      
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
      }
      
      .modal-content {
        max-width: 100%;
      }
      
      .modal-body {
        padding: 20px;
      }
      
      .form-control {
        padding: 12px 14px;
      }
      
      .landing-header {
        padding: 20px;
      }
      
      .landing-title {
        font-size: 2rem;
      }
      
      .landing-price {
        font-size: 2.5rem;
      }
      
      .benefits-section,
      .features-section,
      .cta-section {
        padding: 20px;
      }
      
      .benefits-grid {
        grid-template-columns: 1fr;
      }
      
      .cta-buttons {
        flex-direction: column;
      }
      
      .btn-cta-whatsapp,
      .btn-cta-secondary {
        width: 100%;
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .filters-elegant {
        justify-content: center;
      }
      
      .filter-chip {
        padding: 8px 16px;
        font-size: 0.8rem;
      }
      
      .modal-header {
        padding: 20px;
      }
      
      .modal-header h2 {
        font-size: 1.3rem;
      }
      
      .landing-title {
        font-size: 1.8rem;
      }
      
      .landing-price {
        font-size: 2rem;
      }
    }

    /* Loading */
    .loading {
      text-align: center;
      padding: 40px;
      color: var(--gray);
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 30px 0;
      color: var(--gray);
      border-top: 1px solid var(--border);
      margin-top: 30px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .footer-link {
      color: var(--secondary);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
    }

    .footer-link:hover {
      color: var(--accent);
    }

    /* Stock Urgente */
    .stock-warning {
      background: linear-gradient(135deg, #fee2e2, #fecaca);
      color: var(--danger);
      padding: 10px 15px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      border-left: 4px solid var(--danger);
    }

    .stock-count {
      background: var(--danger);
      color: white;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 800;
    }

    /* Descuento */
    .discount-tag {
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: 800;
      font-size: 0.9rem;
      display: inline-block;
      margin-left: 10px;
      vertical-align: middle;
    }
  </style>
</head>
<body>
  <!-- CATÁLOGO PRINCIPAL -->
  <div class="container" id="mainCatalog">
    <header class="hero-header">
      <div class="header-content">
        <div class="brand-title">
          <img
            src="https://cdn.shopify.com/s/files/1/0707/1979/9484/files/logo_one.jpg?v=1770177941"
            alt="CATÁLOGO ONE"
            class="brand-logo"
          >
          <h1>CATÁLOGO ONE</h1>
        </div>
        <p class="tagline">Productos de calidad con entregas rápidas y atención personalizada</p>
      </div>
    </header>

    <!-- Controles -->
    <div class="controls-elegant">
      <div class="search-elegant">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Buscar productos...">
      </div>

      <div class="filters-elegant">
        <div class="filter-chip active" data-filter="all">
          <i class="fas fa-th"></i> Todos
        </div>
        <div class="filter-chip" data-filter="plantilla">
          <i class="fas fa-shoe-prints"></i> Plantillas
        </div>
        <div class="filter-chip" data-filter="electronico">
          <i class="fas fa-bolt"></i> Electrónicos
        </div>
        <div class="filter-chip" data-filter="hogar">
          <i class="fas fa-home"></i> Hogar
        </div>
        <div class="filter-chip" data-filter="salud">
          <i class="fas fa-heartbeat"></i> Salud
        </div>
        <div class="filter-chip" data-filter="herramienta">
          <i class="fas fa-tools"></i> Herramientas
        </div>
      </div>

      <div class="product-counter" id="productCounter">
        <span id="productCount">Cargando productos...</span>
      </div>
    </div>

    <!-- Grid de Productos -->
    <div class="products-grid" id="productsGrid">
      <!-- Productos cargados dinámicamente -->
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-links">
        <a href="#" class="footer-link">Términos y Condiciones</a>
        <a href="#" class="footer-link">Política de Envíos</a>
        <a href="#" class="footer-link">Garantía</a>
        <a href="#" class="footer-link">Contacto</a>
      </div>
      <p>© 2026 CATÁLOGO ONE - Todos los derechos reservados</p>
      <p>Envíos a todo el país | Pagos seguros | Soporte 24/7</p>
    </footer>
  </div>

  <!-- LANDING PAGE DE PRODUCTO -->
  <div class="container landing-container" id="productLanding">
    <button class="back-to-catalog" id="backToCatalog">
      <i class="fas fa-arrow-left"></i> Volver al Catálogo
    </button>

    <div class="landing-product" id="landingProduct">
      <!-- Contenido dinámico -->
    </div>
  </div>

  <!-- MODAL DE COMPRA -->
  <div class="modal-elegant" id="purchaseModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-shopping-cart"></i> Finalizar Compra</h2>
        <p>Complete sus datos para enviar el pedido por WhatsApp</p>
        <button class="close-modal" id="closeModal">&times;</button>
      </div>

      <div class="modal-body">
        <!-- Información del Producto -->
        <div class="form-section">
          <h3><i class="fas fa-box"></i> Producto Seleccionado</h3>
          <div id="modalProductInfo" style="
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f8fafc;
            padding: 15px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
          ">
            <img id="modalProductImage" src="" alt="" style="
              width: 80px;
              height: 80px;
              object-fit: contain;
              border-radius: var(--radius-sm);
              background: white;
              padding: 8px;
            ">
            <div>
              <h4 id="modalProductTitle" style="
                margin-bottom: 5px;
                color: var(--primary);
                font-size: 1rem;
              "></h4>
              <p id="modalProductSku" style="
                color: var(--gray);
                font-size: 0.8rem;
                margin-bottom: 8px;
              "></p>
              <div id="modalProductPrice" style="
                font-size: 1.2rem;
                font-weight: 700;
                color: var(--danger);
              "></div>
            </div>
          </div>
        </div>

        <!-- Información Personal -->
        <div class="form-section">
          <h3><i class="fas fa-user"></i> Datos Personales</h3>
          <div class="form-group">
            <label for="customerName" class="required">Nombre y Apellido</label>
            <input type="text" id="customerName" class="form-control" placeholder="Ej: María González">
          </div>
          <div class="form-group">
            <label for="customerPhone" class="required">Celular con WhatsApp</label>
            <input type="tel" id="customerPhone" class="form-control" placeholder="Ej: 0981 123456">
          </div>
        </div>

        <!-- Dirección -->
        <div class="form-section">
          <h3><i class="fas fa-map-marker-alt"></i> Dirección de Envío</h3>
          <div class="form-group">
            <label for="customerCity" class="required">Ciudad</label>
            <input type="text" id="customerCity" class="form-control" placeholder="Ej: Asunción">
          </div>
          <div class="form-group">
            <label for="customerDistrict" class="required">Barrio</label>
            <input type="text" id="customerDistrict" class="form-control" placeholder="Ej: Sajonia">
          </div>
          <div class="form-group">
            <label for="customerAddress" class="required">Dirección Completa</label>
            <input type="text" id="customerAddress" class="form-control" placeholder="Calle, número, entre calles">
          </div>
          <div class="form-group">
            <label for="customerReference">Referencia (Opcional)</label>
            <textarea id="customerReference" class="form-control" rows="2" placeholder="Cerca de..."></textarea>
          </div>
        </div>

        <!-- Opciones -->
        <div class="form-section">
          <h3><i class="fas fa-cogs"></i> Opciones del Pedido</h3>
          
          <div class="form-group">
            <label class="required">Cantidad</label>
            <div class="quantity-selector">
              <button class="qty-btn" id="decreaseQty">-</button>
              <div class="quantity-display" id="quantityDisplay">1</div>
              <button class="qty-btn" id="increaseQty">+</button>
            </div>
            <div id="discountMessage" style="
              margin-top: 10px;
              color: var(--success);
              font-weight: 600;
              font-size: 0.9rem;
            "></div>
          </div>

          <!-- Tallas (solo para plantillas) -->
          <div class="form-group" id="sizeSection" style="display: none;">
            <label class="required">Selecciona tu calce</label>
            <div class="size-selector" id="sizeOptions">
              <!-- Opciones de tallas se cargan dinámicamente -->
            </div>
          </div>

          <!-- Método de envío -->
          <div class="form-group">
            <label for="shippingMethod">Método de envío</label>
            <div style="display: flex; flex-direction: column; gap: 10px;">
              <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                <input type="radio" name="shipping" value="standard" checked style="width: 18px; height: 18px;">
                <div>
                  <div style="font-weight: 600;">Envío estándar (2-4 días)</div>
                  <div style="color: var(--success); font-size: 0.9rem;">Gratis</div>
                </div>
              </label>
              <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                <input type="radio" name="shipping" value="express" style="width: 18px; height: 18px;">
                <div>
                  <div style="font-weight: 600;">Entrega Express 24 horas</div>
                  <div style="color: var(--danger); font-size: 0.9rem;">Gs. 10,000</div>
                  <div style="font-size: 0.8rem; color: var(--gray);">Solo Asunción y Central</div>
                </div>
              </label>
            </div>
          </div>
        </div>

        <!-- Resumen -->
        <div class="order-summary">
          <h3 style="margin-bottom: 20px; color: var(--primary);">Resumen del Pedido</h3>
          <div class="summary-row">
            <span>Producto:</span>
            <span id="summaryProduct">-</span>
          </div>
          <div class="summary-row">
            <span>Cantidad:</span>
            <span id="summaryQuantity">1</span>
          </div>
          <div class="summary-row">
            <span>Subtotal:</span>
            <span id="summarySubtotal">0 Gs</span>
          </div>
          <div class="summary-row" id="discountRow" style="display: none;">
            <span>Descuento (10%):</span>
            <span id="summaryDiscount" style="color: var(--success); font-weight: 600;">0 Gs</span>
          </div>
          <div class="summary-row">
            <span>Envío:</span>
            <span id="summaryShipping">Gratis</span>
          </div>
          <div class="summary-row total">
            <span>TOTAL:</span>
            <span id="summaryTotal" style="color: var(--danger); font-size: 1.3rem;">0 Gs</span>
          </div>
        </div>

        <!-- Botón WhatsApp -->
        <button class="btn-whatsapp" id="whatsappButton" style="margin-top: 25px;">
          <i class="fab fa-whatsapp"></i>
          ENVIAR PEDIDO POR WHATSAPP
        </button>
      </div>
    </div>
  </div>

  <script>
    // Configuración
    const WHATSAPP_NUMBER = "595992526814";

    // Lista completa de productos con beneficios adicionales
    const products = [
      {
        title: "PLANTILLA ORTOPÉDICA | ORTOPIEX 5D®",
        sku: "PLANTILLA ORTOPÉDICA | ORTOPIEX 5D® - 001",
        price: 159000,
        oldPrice: 199000,
        image_url: "https://www.skylinestoree.online/cdn/shop/files/ChatGPT_Image_8_jun_2025_01_04_14_a.m..png?v=1757629829&width=600",
        isPlantilla: true,
        category: "plantilla",
        description: "Plantilla ortopédica de última generación con tecnología 5D que proporciona soporte integral al pie. Diseñada para distribuir uniformemente la presión, reducir la fatiga y prevenir lesiones.",
        features: [
          "Material ortopédico 5D de alta densidad",
          "Soporte para arco plantar anatómico",
          "Amortiguación de impacto en talón y metatarso",
          "Material transpirable y antimicrobiano",
          "Calces disponibles del 35 al 45",
          "Alivia dolores de espalda, rodillas y cadera"
        ],
        benefits: [
          {
            title: "Alivio Inmediato del Dolor",
            description: "Siente alivio desde el primer uso. Reduce la fatiga y el dolor en pies, rodillas y espalda."
          },
          {
            title: "Tecnología 5D Avanzada",
            description: "Cinco capas de amortiguación que se adaptan a tu pisada para máximo confort."
          },
          {
            title: "Garantía de 6 Meses",
            description: "Confía en la calidad. Garantía por defectos de fabricación durante 6 meses."
          },
          {
            title: "Material Antimicrobiano",
            description: "Elimina el 99% de bacterias y hongos. Perfecta para uso diario y deportivo."
          }
        ],
        stock: 8,
        urgent: true,
        discount: true
      },
      {
        title: "MINI ASPIRADORA PORTÁTIL",
        sku: "MINI ASPIRADORA - 002",
        price: 119900,
        oldPrice: 149900,
        image_url: "https://cdn.shopify.com/s/files/1/0885/3012/5095/files/ChatGPT_Image_9_ago_2025_09_49_46_p.m._ee0d4101-4eb8-45cf-9b23-e5e1d8c6288c.png?v=1755580613",
        isPlantilla: false,
        category: "hogar",
        description: "Mini aspiradora portátil de alta potencia para limpieza rápida y eficiente. Perfecta para el hogar, oficina o automóvil.",
        features: [
          "Potente succión 6000Pa para limpieza profunda",
          "Batería recargable USB-C de larga duración",
          "Filtro HEPA lavable que atrapa el 99.97% de partículas",
          "Cepillo multifunción para diferentes superficies",
          "Diseño ergonómico y peso ligero de solo 500g",
          "Incluye 3 boquillas especializadas"
        ],
        benefits: [
          {
            title: "Limpieza en Minutos",
            description: "Aspira polvo, migas y pelo de mascotas en segundos. Ideal para mantener todo impecable."
          },
          {
            title: "Portabilidad Total",
            description: "Llévala a donde quieras. Perfecta para auto, oficina, sofá y lugares difíciles."
          },
          {
            title: "Ahorro de Tiempo y Esfuerzo",
            description: "Olvídate de barrer. Limpia más rápido y con mejor resultado que una escoba."
          },
          {
            title: "Filtro HEPA Lavable",
            description: "Atrapa alérgenos y ácaros. Ideal para personas con alergias o asma."
          }
        ],
        stock: 12,
        urgent: true,
        discount: true
      },
      {
        title: "PLUMERO EXTENSIBLE 2.80 M",
        sku: "PLUMERO EXTENSIBLE 2.80 M - 003",
        price: 109000,
        oldPrice: 139000,
        image_url: "https://cdn.shopify.com/s/files/1/0707/1979/9484/files/Captura_de_pantalla_2025-10-30_005208.jpg?v=1762320213",
        isPlantilla: false,
        category: "hogar",
        description: "Plumero telescópico extensible de 2.80 metros para alcanzar lugares altos y difíciles sin necesidad de escaleras.",
        features: [
          "Extensible desde 1.20m hasta 2.80m",
          "Cabezal giratorio 360° para limpieza completa",
          "Microfibra lavable que atrapa el polvo electrostáticamente",
          "Mango antideslizante ergonómico",
          "Plegable para fácil almacenaje",
          "Material aluminio reforzado ultraligero"
        ],
        benefits: [
          {
            title: "Alcanza Todo Sin Riesgo",
            description: "Limpia techos, ventiladores y esquinas altas sin subirte a escaleras peligrosas."
          },
          {
            title: "Ahorra Tiempo en Limpieza",
            description: "Termina en minutos lo que antes te tomaba horas. Limpia áreas grandes rápidamente."
          },
          {
            title: "Microfibra Lavable y Reutilizable",
            description: "Lávala y úsala cientos de veces. Ahorra dinero en toallas desechables."
          },
          {
            title: "Compacto para Guardar",
            description: "Ocúpalo cuando lo necesites. Se pliega a 1.20m para guardarlo en cualquier closet."
          }
        ],
        stock: 15,
        urgent: false,
        discount: false
      },
      {
        title: "HUEVERA ELÉCTRICA GALLINITA",
        sku: "HUEVERA ELÉCTRICA EN FORMA DE GALLINITA - 004",
        price: 127900,
        oldPrice: 159900,
        image_url: "https://i5.walmartimages.com/asr/38287ab5-5cf3-4aa2-a7ff-e7d3e60a240d.ed14180e8b1a0f73bc88f4cf03082575.png?odnHeight=612&odnWidth=612&odnBg=FFFFFF",
        isPlantilla: false,
        category: "electronico",
        description: "Huevera eléctrica con diseño divertido de gallina que cocina huevos automáticamente. Sistema de cocción por vapor para huevos más saludables.",
        features: [
          "Cocción automática por vapor para huevos perfectos",
          "Diseño decorativo gallinita que alegra tu cocina",
          "Capacidad para 6 huevos tamaño grande",
          "Apagado automático con alarma sonora",
          "Indicador LED de funcionamiento",
          "Material plástico food grade libre de BPA"
        ],
        benefits: [
          {
            title: "Desayuno Perfecto en Minutos",
            description: "Prepara huevos duros, pasados por agua o tibios perfectamente sin supervisión."
          },
          {
            title: "Más Saludable que Hervir",
            description: "La cocción al vapor conserva más nutrientes y no genera olores fuertes en la cocina."
          },
          {
            title: "Ahorro de Gas y Energía",
            description: "Consume solo 350W. Más económico que hervir agua en la hornalla."
          },
          {
            title: "Regalo Perfecto",
            description: "Ideal para madres, estudiantes o cualquier amante de los huevos. ¡Divertido y útil!"
          }
        ],
        stock: 6,
        urgent: true,
        discount: true
      },
      {
        title: "SOPORTE ANTIVIBRACIÓN X 4",
        sku: "SOPORTE ANTIVIBRACIÓN Y NIVELADORAS X 4 - 005",
        price: 99000,
        oldPrice: 129000,
        image_url: "https://http2.mlstatic.com/D_923417-MLA87858875006_072025-C.jpg",
        isPlantilla: false,
        category: "herramienta",
        description: "Kit de 4 soportes antivibración y niveladores para electrodomésticos. Elimina ruidos y vibraciones, mantiene nivelado.",
        features: [
          "Set de 4 unidades para lavarropas, heladeras, etc.",
          "Sistema antivibración con amortiguadores de goma",
          "Base antideslizante para máxima estabilidad",
          "Ajuste de altura de 1 a 5 cm",
          "Material goma reforzada de alta durabilidad",
          "Carga máxima 50kg por soporte (200kg total)"
        ],
        benefits: [
          {
            title: "Silencia tu Lavarropas",
            description: "Elimina el 90% del ruido y vibración. Ya no molestará a la familia ni vecinos."
          },
          {
            title: "Protege tus Electrodomésticos",
            description: "Reduce el desgaste por vibración. Extiende la vida útil de tus aparatos."
          },
          {
            title: "Nivelación Perfecta",
            description: "Compensa pisos desnivelados. Previene daños y mejora el funcionamiento."
          },
          {
            title: "Fácil Instalación",
            description: "No necesitas herramientas. Solo colócalos y ajusta la altura necesaria."
          }
        ],
        stock: 20,
        urgent: false,
        discount: false
      }
      // Los demás productos continuarían aquí...
    ];

    // Variables de estado
    let currentProduct = null;
    let quantity = 1;
    let selectedSize = null;

    // Formatear precio
    function formatPrice(price) {
      const n = Math.round(Number(price) || 0);
      return 'Gs. ' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    // Cargar productos en el grid
    function loadProducts() {
      const grid = document.getElementById('productsGrid');
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const activeFilter = document.querySelector('.filter-chip.active')?.dataset.filter || 'all';
      
      // Filtrar productos
      const filteredProducts = products.filter(product => {
        const matchesSearch = !searchTerm || 
          product.title.toLowerCase().includes(searchTerm) ||
          product.sku.toLowerCase().includes(searchTerm);
        
        const matchesFilter = activeFilter === 'all' || product.category === activeFilter;
        
        return matchesSearch && matchesFilter;
      });
      
      // Actualizar contador
      document.getElementById('productCount').textContent = 
        `Mostrando ${filteredProducts.length} de ${products.length} productos`;
      
      // Limpiar grid
      grid.innerHTML = '';
      
      // Si no hay productos
      if (filteredProducts.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--gray);">
            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
            <h3>No se encontraron productos</h3>
            <p>Intenta con otros términos de búsqueda</p>
          </div>
        `;
        return;
      }
      
      // Agregar productos al grid
      filteredProducts.forEach((product, index) => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.innerHTML = `
          <div class="product-image-container">
            <img src="${product.image_url}" alt="${product.title}" class="product-image"
                 onerror="this.src='https://via.placeholder.com/300x200?text=Producto'">
            <div class="product-badges">
              <div class="badge ${product.isPlantilla ? 'badge-accent' : 'badge-primary'}">
                ${product.isPlantilla ? 'PLANTILLA' : product.category.toUpperCase()}
              </div>
              ${product.urgent ? '<div class="badge badge-danger">ÚLTIMAS UNIDADES</div>' : ''}
              ${product.discount ? '<div class="badge badge-warning">OFERTA</div>' : ''}
            </div>
          </div>
          <div class="product-info">
            <h3 class="product-title">${product.title}</h3>
            <p class="product-sku">${product.sku}</p>
            <div class="product-price">${formatPrice(product.price)}</div>
            ${product.oldPrice ? `
              <div style="color: var(--gray); text-decoration: line-through; font-size: 0.9rem;">
                Antes: ${formatPrice(product.oldPrice)}
              </div>
            ` : ''}
            ${product.urgent ? `
              <div class="stock-warning" style="margin: 10px 0; padding: 8px; font-size: 0.8rem;">
                <i class="fas fa-exclamation-triangle"></i>
                Solo quedan ${product.stock} unidades
              </div>
            ` : ''}
            <button class="btn-view-details" onclick="showProductLanding(${products.indexOf(product)})">
              <i class="fas fa-info-circle"></i> Ver Detalles
            </button>
            <button class="btn-whatsapp" onclick="openPurchaseModal(${products.indexOf(product)})">
              <i class="fab fa-whatsapp"></i> Comprar Ahora
            </button>
          </div>
        `;
        grid.appendChild(productCard);
      });
    }

    // Mostrar landing page del producto
    function showProductLanding(index) {
      currentProduct = products[index];
      
      // Ocultar catálogo, mostrar landing
      document.getElementById('mainCatalog').style.display = 'none';
      document.getElementById('productLanding').classList.add('active');
      
      // Generar contenido de la landing
      const landingProduct = document.getElementById('landingProduct');
      landingProduct.innerHTML = `
        <div class="landing-header">
          <div class="landing-image-wrapper">
            <img src="${currentProduct.image_url}" alt="${currentProduct.title}" class="landing-image"
                 onerror="this.src='https://via.placeholder.com/400x400?text=Producto'">
          </div>
          
          <div class="landing-info">
            ${currentProduct.urgent ? `
              <div class="stock-warning">
                <i class="fas fa-exclamation-triangle"></i>
                <span>¡ÚLTIMAS UNIDADES!</span>
                <span class="stock-count">Solo ${currentProduct.stock} disponibles</span>
              </div>
            ` : ''}
            
            <h1 class="landing-title">${currentProduct.title}</h1>
            <div class="landing-sku">${currentProduct.sku}</div>
            
            <div class="landing-price-container">
              ${currentProduct.oldPrice ? `
                <div style="margin-bottom: 5px;">
                  <span class="landing-old-price">${formatPrice(currentProduct.oldPrice)}</span>
                  <span class="discount-tag">¡OFERTA!</span>
                </div>
              ` : ''}
              <div class="landing-price">${formatPrice(currentProduct.price)}</div>
            </div>
            
            ${currentProduct.discount ? `
              <div class="urgency-banner">
                <i class="fas fa-tag"></i>
                <div>
                  <strong>10% DE DESCUENTO</strong> al comprar 2 o más unidades
                  <div style="font-size: 0.9rem; margin-top: 5px;">Ahorra hasta ${formatPrice(currentProduct.price * 0.2)} en 2 unidades</div>
                </div>
              </div>
            ` : ''}
            
            <div class="urgency-banner">
              <i class="fas fa-shipping-fast"></i>
              <div>
                <strong>ENVÍO GRATIS</strong> a todo el país
                <div style="font-size: 0.9rem; margin-top: 5px;">Entrega en 2-4 días hábiles</div>
              </div>
            </div>
            
            <div class="urgency-banner">
              <i class="fas fa-shield-alt"></i>
              <div>
                <strong>GARANTÍA DE 30 DÍAS</strong>
                <div style="font-size: 0.9rem; margin-top: 5px;">Devolución si no estás satisfecho</div>
              </div>
            </div>
            
            <div style="margin-top: 30px;">
              <button class="btn-whatsapp" onclick="openPurchaseModal(${index})" style="padding: 18px; font-size: 1.1rem;">
                <i class="fab fa-whatsapp"></i>
                COMPRAR AHORA POR WHATSAPP
              </button>
            </div>
          </div>
        </div>
        
        <div class="benefits-section">
          <h3><i class="fas fa-star"></i> ¿Por qué necesitas este producto?</h3>
          <div class="benefits-grid">
            ${currentProduct.benefits.map(benefit => `
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-check"></i>
                </div>
                <div class="benefit-content">
                  <h4>${benefit.title}</h4>
                  <p style="color: var(--gray); font-size: 0.9rem;">${benefit.description}</p>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
        
        <div class="features-section">
          <h3><i class="fas fa-list-check"></i> Características Técnicas</h3>
          <ul class="features-list">
            ${currentProduct.features.map(feature => `
              <li>
                <i class="fas fa-check-circle" style="color: var(--accent);"></i>
                ${feature}
              </li>
            `).join('')}
          </ul>
        </div>
        
        <div class="cta-section">
          <h3>¿Listo para transformar tu experiencia?</h3>
          <p style="opacity: 0.9; margin-bottom: 20px; max-width: 600px; margin: 0 auto 20px;">
            ${currentProduct.urgent ? 
              `¡No te quedes sin el tuyo! Solo ${currentProduct.stock} disponibles a este precio especial.` :
              'Miles de clientes satisfechos ya disfrutan de este producto. ¡Únete a ellos hoy mismo!'
            }
          </p>
          
          <div class="cta-buttons">
            <button class="btn-cta-whatsapp" onclick="openPurchaseModal(${index})">
              <i class="fab fa-whatsapp"></i>
              COMPRAR AHORA
            </button>
            <button class="btn-cta-secondary" onclick="showProductLanding(${index})">
              <i class="fas fa-question-circle"></i>
              ¿TIENES DUDAS? CONSULTA
            </button>
          </div>
        </div>
      `;
      
      // Scroll al inicio
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Abrir modal de compra
    function openPurchaseModal(index) {
      currentProduct = products[index];
      quantity = 1;
      selectedSize = null;
      
      // Actualizar información del producto en el modal
      document.getElementById('modalProductImage').src = currentProduct.image_url;
      document.getElementById('modalProductTitle').textContent = currentProduct.title;
      document.getElementById('modalProductSku').textContent = currentProduct.sku;
      
      let priceHtml = formatPrice(currentProduct.price);
      if (currentProduct.oldPrice) {
        priceHtml += ` <span style="color: var(--gray); text-decoration: line-through; font-size: 0.9rem;">${formatPrice(currentProduct.oldPrice)}</span>`;
      }
      document.getElementById('modalProductPrice').innerHTML = priceHtml;
      
      // Actualizar resumen
      updateOrderSummary();
      
      // Mostrar/ocultar selección de tallas
      const sizeSection = document.getElementById('sizeSection');
      const sizeOptions = document.getElementById('sizeOptions');
      
      if (currentProduct.isPlantilla) {
        sizeSection.style.display = 'block';
        sizeOptions.innerHTML = '';
        
        // Crear opciones de tallas del 35 al 45
        for (let i = 35; i <= 45; i++) {
          const sizeOption = document.createElement('div');
          sizeOption.className = 'size-option';
          sizeOption.textContent = i;
          sizeOption.onclick = () => {
            document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
            sizeOption.classList.add('selected');
            selectedSize = i;
          };
          sizeOptions.appendChild(sizeOption);
        }
      } else {
        sizeSection.style.display = 'none';
      }
      
      // Mostrar modal
      document.getElementById('purchaseModal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
      
      // Enfocar primer campo
      setTimeout(() => {
        document.getElementById('customerName').focus();
      }, 300);
    }

    // Actualizar resumen del pedido
    function updateOrderSummary() {
      if (!currentProduct) return;
      
      // Calcular subtotal
      const subtotal = currentProduct.price * quantity;
      
      // Aplicar descuento del 10% si hay 2 o más unidades
      let discount = 0;
      let totalBeforeDiscount = subtotal;
      
      if (quantity >= 2 && currentProduct.discount) {
        discount = subtotal * 0.1;
      }
      
      // Calcular costo de envío
      const shippingMethod = document.querySelector('input[name="shipping"]:checked').value;
      const shippingCost = shippingMethod === 'express' ? 10000 : 0;
      
      // Calcular total
      const total = subtotal - discount + shippingCost;
      
      // Actualizar UI
      document.getElementById('summaryProduct').textContent = currentProduct.title;
      document.getElementById('summaryQuantity').textContent = quantity;
      document.getElementById('summarySubtotal').textContent = formatPrice(totalBeforeDiscount);
      
      if (discount > 0) {
        document.getElementById('discountRow').style.display = 'flex';
        document.getElementById('summaryDiscount').textContent = `-${formatPrice(discount)}`;
      } else {
        document.getElementById('discountRow').style.display = 'none';
      }
      
      document.getElementById('summaryShipping').textContent = 
        shippingCost > 0 ? formatPrice(shippingCost) : 'Gratis';
      document.getElementById('summaryTotal').textContent = formatPrice(total);
      
      // Actualizar mensaje de descuento
      const discountMessage = document.getElementById('discountMessage');
      if (quantity >= 2 && currentProduct.discount) {
        discountMessage.innerHTML = `<i class="fas fa-tag"></i> ¡10% de descuento aplicado! Ahorrás ${formatPrice(discount)}`;
        discountMessage.style.color = 'var(--success)';
      } else if (currentProduct.discount) {
        discountMessage.innerHTML = `<i class="fas fa-info-circle"></i> Compra 2 o más unidades para obtener 10% de descuento`;
        discountMessage.style.color = 'var(--gray)';
      } else {
        discountMessage.innerHTML = '';
      }
    }

    // Validar formulario
    function validateForm() {
      const requiredFields = [
        'customerName',
        'customerPhone',
        'customerCity',
        'customerDistrict',
        'customerAddress'
      ];
      
      let isValid = true;
      
      requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (!field.value.trim()) {
          field.classList.add('error');
          isValid = false;
        } else {
          field.classList.remove('error');
        }
      });
      
      if (currentProduct?.isPlantilla && !selectedSize) {
        alert('Por favor selecciona un calce para la plantilla.');
        isValid = false;
      }
      
      return isValid;
    }

    // Crear mensaje de WhatsApp
    function createWhatsAppMessage() {
      const name = document.getElementById('customerName').value;
      const phone = document.getElementById('customerPhone').value;
      const city = document.getElementById('customerCity').value;
      const district = document.getElementById('customerDistrict').value;
      const address = document.getElementById('customerAddress').value;
      const reference = document.getElementById('customerReference').value;
      const shippingMethod = document.querySelector('input[name="shipping"]:checked').value;
      
      // Calcular montos
      const subtotal = currentProduct.price * quantity;
      const discount = (quantity >= 2 && currentProduct.discount) ? subtotal * 0.1 : 0;
      const shippingCost = shippingMethod === 'express' ? 10000 : 0;
      const total = subtotal - discount + shippingCost;
      
      // Crear mensaje
      let message = `*🚀 NUEVO PEDIDO - CATÁLOGO ONE*\n\n`;
      message += `*📦 Producto:* ${currentProduct.title}\n`;
      message += `*📋 SKU:* ${currentProduct.sku}\n`;
      
      if (currentProduct.isPlantilla) {
        message += `*👟 Calce:* ${selectedSize}\n`;
      }
      
      message += `*💰 Precio unitario:* ${formatPrice(currentProduct.price)}\n`;
      message += `*🧾 Cantidad:* ${quantity}\n`;
      message += `*🧾 Subtotal:* ${formatPrice(subtotal)}\n`;
      
      if (discount > 0) {
        message += `*🎁 Descuento (10%):* -${formatPrice(discount)}\n`;
      }
      
      message += `*🚚 Envío:* ${shippingMethod === 'express' ? 'EXPRESS 24h - Gs. 10,000' : 'Estándar (2-4 días) - Gratis'}\n`;
      message += `*✅ TOTAL:* ${formatPrice(total)}\n\n`;
      
      message += `*👤 DATOS DEL CLIENTE*\n`;
      message += `Nombre: ${name}\n`;
      message += `Teléfono: ${phone}\n`;
      message += `Ciudad: ${city}\n`;
      message += `Barrio: ${district}\n`;
      message += `Dirección: ${address}\n`;
      
      if (reference) {
        message += `Referencia: ${reference}\n`;
      }
      
      message += `\n*¡Gracias por tu compra!*`;
      
      return encodeURIComponent(message);
    }

    // Enviar mensaje por WhatsApp
    function sendWhatsAppMessage() {
      if (!validateForm()) {
        alert('Por favor completa todos los campos obligatorios.');
        return;
      }
      
      const message = createWhatsAppMessage();
      const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${message}`;
      window.open(url, '_blank');
      
      // Cerrar modal
      closeModal();
    }

    // Cerrar modal
    function closeModal() {
      document.getElementById('purchaseModal').style.display = 'none';
      document.body.style.overflow = 'auto';
      
      // Limpiar formulario
      document.getElementById('customerName').value = '';
      document.getElementById('customerPhone').value = '';
      document.getElementById('customerCity').value = '';
      document.getElementById('customerDistrict').value = '';
      document.getElementById('customerAddress').value = '';
      document.getElementById('customerReference').value = '';
      
      // Remover clases de error
      document.querySelectorAll('.form-control').forEach(input => {
        input.classList.remove('error');
      });
    }

    // Volver al catálogo
    function backToCatalog() {
      document.getElementById('productLanding').classList.remove('active');
      document.getElementById('mainCatalog').style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Inicializar
    document.addEventListener('DOMContentLoaded', () => {
      // Cargar productos
      loadProducts();
      
      // Eventos de búsqueda
      document.getElementById('searchInput').addEventListener('input', loadProducts);
      
      // Eventos de filtros
      document.querySelectorAll('.filter-chip').forEach(chip => {
        chip.addEventListener('click', () => {
          document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
          chip.classList.add('active');
          loadProducts();
        });
      });
      
      // Eventos del modal
      document.getElementById('closeModal').addEventListener('click', closeModal);
      
      document.getElementById('purchaseModal').addEventListener('click', (e) => {
        if (e.target.id === 'purchaseModal') {
          closeModal();
        }
      });
      
      // Eventos de cantidad
      document.getElementById('increaseQty').addEventListener('click', () => {
        quantity = Math.min(99, quantity + 1);
        document.getElementById('quantityDisplay').textContent = quantity;
        updateOrderSummary();
      });
      
      document.getElementById('decreaseQty').addEventListener('click', () => {
        quantity = Math.max(1, quantity - 1);
        document.getElementById('quantityDisplay').textContent = quantity;
        updateOrderSummary();
      });
      
      // Eventos de envío
      document.querySelectorAll('input[name="shipping"]').forEach(radio => {
        radio.addEventListener('change', updateOrderSummary);
      });
      
      // Evento del botón de WhatsApp
      document.getElementById('whatsappButton').addEventListener('click', sendWhatsAppMessage);
      
      // Evento para volver al catálogo
      document.getElementById('backToCatalog').addEventListener('click', backToCatalog);
      
      // Remover clases error al escribir
      document.querySelectorAll('.form-control').forEach(input => {
        input.addEventListener('input', function() {
          this.classList.remove('error');
        });
      });
    });
  </script>
</body>
</html>
